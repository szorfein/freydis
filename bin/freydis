#!/usr/bin/env ruby
require "freydis"

puts "Freydis v." + Freydis::VERSION

cli = Freydis::Options.new(ARGV)
data = Freydis::Data.new
data.load

if cli.init
  Freydis::Init.run(data.options)
  puts data.options[:disk]
  data.save
  exit 0
end

if !cli.backup && !cli.restore && !cli.encrypt
  puts "Ok... glad to see you too."
  exit 1
end

if cli.encrypt
  puts "Encrypting disk #{data.options[:disk]}..."
  disk = Freydis::Disk.new(data.options[:disk])
  disk.encrypt(data)
  data.save
elsif cli.backup
  puts "Saving..."
elsif cli.restore
  puts "Restoring..."
end
